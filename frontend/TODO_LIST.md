# 前端开发TODO列表

## 项目概述
基于游戏主流程设计文档，将前端从简单的选择式游戏重构为完整的文本冒险游戏，与后端LLM驱动游戏引擎对接。

## 当前前端问题分析
- ❌ **流程不完整**：现有代码只有开场白和简单的天数选择，缺少核心的行动计划输入和结果展示
- ❌ **API对接不匹配**：前端API调用与后端实际接口不匹配
- ❌ **状态管理不完善**：缺少游戏状态、世界状态、NPC状态的管理
- ❌ **UI设计过时**：缺少行动计划输入界面、结果展示界面等核心组件

---

## 第一阶段：核心功能 🔥 (最高优先级)

### 1.1 核心游戏流程重构
- [ ] **新建 `GameMainView.vue`** - 主游戏界面，替换现有的天数选择逻辑
  - [ ] 行动计划输入区域（100字限制）
  - [ ] 游戏状态展示区域
  - [ ] 结果展示区域
  - [ ] 时段进度显示（上午/下午/晚上）

- [ ] **新建 `ActionInputPanel.vue`** - 行动计划输入组件
  - [ ] 文本输入框（100字限制）
  - [ ] 字数统计显示
  - [ ] 提交按钮
  - [ ] 输入验证逻辑

- [ ] **新建 `GameResultPanel.vue`** - 游戏结果展示组件
  - [ ] 三个时段的事件展示
  - [ ] 状态变化动画
  - [ ] 继续游戏按钮

### 1.2 API接口重构
- [ ] **修改 `gameApi.js`**
  - [ ] 移除过时的天数选择接口
  - [ ] 添加游戏行动处理接口 `/api/game/action`
  - [ ] 添加游戏状态获取接口
  - [ ] 添加会话管理接口

### 1.3 路由重构
- [ ] **修改 `router/index.js`**
  - [ ] 移除过时的路由
  - [ ] 添加主游戏路由 `/game/:gameId`
  - [ ] 添加游戏结束路由 `/game/:gameId/end`

### 1.4 清理旧代码
- [ ] **删除过时组件**
  - [ ] 删除 `views/days/` 目录下的所有天数选择组件
  - [ ] 清理 `HomeView.vue` 中的天数管理逻辑
  - [ ] 移除过时的API调用代码

---

## 第二阶段：状态管理 📊 (高优先级)

### 2.1 新建状态管理Store
- [ ] **新建 `gameStore.js`** - 游戏状态管理
  - [ ] 当前游戏ID管理
  - [ ] 当前天数和时段跟踪
  - [ ] 游戏历史记录存储
  - [ ] 游戏完成状态管理

- [ ] **新建 `worldStore.js`** - 世界状态管理
  - [ ] 天气状况跟踪
  - [ ] 地点信息管理
  - [ ] 世界事件记录

- [ ] **新建 `npcStore.js`** - NPC状态管理
  - [ ] NPC基本信息存储
  - [ ] 关系值变化跟踪
  - [ ] NPC行动历史记录

### 2.2 状态同步和持久化
- [ ] 实现状态同步机制
- [ ] 添加本地存储持久化
- [ ] 实现状态恢复功能

### 2.3 错误处理和重试机制
- [ ] 添加网络错误处理
- [ ] 实现自动重试逻辑
- [ ] 添加离线状态检测

---

## 第三阶段：用户体验 ✨ (中优先级)

### 3.1 UI组件优化
- [ ] **新建 `TimeProgressBar.vue`** - 时段进度条
- [ ] **新建 `EventCard.vue`** - 事件卡片组件
- [ ] **新建 `StatusChangeIndicator.vue`** - 状态变化指示器
- [ ] **新建 `LoadingSpinner.vue`** - 加载动画组件

### 3.2 现有组件优化
- [ ] **优化 `HeroStatus.vue`**
  - [ ] 添加实时状态更新
  - [ ] 改进状态变化动画
  - [ ] 优化布局和样式

- [ ] **优化 `PrologueView.vue`**
  - [ ] 改进与新流程的对接
  - [ ] 优化用户体验

### 3.3 动画和过渡效果
- [ ] 添加状态变化动画效果
- [ ] 实现时段切换过渡动画
- [ ] 添加事件展示动画
- [ ] 优化页面切换过渡

### 3.4 响应式布局
- [ ] 移动端适配
- [ ] 平板端优化
- [ ] 桌面端布局改进

---

## 第四阶段：完善功能 🚀 (低优先级)

### 4.1 游戏结束流程
- [ ] 实现游戏结束检测
- [ ] 添加结果统计页面
- [ ] 实现成就系统

### 4.2 历史记录功能
- [ ] 游戏历史查看界面
- [ ] 行动回放功能
- [ ] 决策分析展示

### 4.3 数据功能
- [ ] 游戏数据导出
- [ ] 存档管理
- [ ] 数据统计

### 4.4 性能优化
- [ ] 组件懒加载
- [ ] 图片资源优化
- [ ] 代码分割优化
- [ ] 内存使用优化

---

## 技术债务清理

### 代码质量
- [ ] 添加TypeScript支持（可选）
- [ ] 完善单元测试
- [ ] 代码规范检查
- [ ] 文档完善

### 依赖管理
- [ ] 依赖版本更新
- [ ] 移除未使用的依赖
- [ ] 安全漏洞修复

---

## 完成标准

### 第一阶段完成标准
- ✅ 玩家可以输入100字以内的行动计划
- ✅ 系统能够调用后端API处理行动
- ✅ 能够展示三个时段的游戏结果
- ✅ 基本的游戏流程可以正常运行

### 第二阶段完成标准
- ✅ 游戏状态能够正确管理和同步
- ✅ 错误情况能够妥善处理
- ✅ 用户数据能够持久化保存

### 第三阶段完成标准
- ✅ 用户界面美观易用
- ✅ 动画效果流畅自然
- ✅ 支持多种设备访问

### 第四阶段完成标准
- ✅ 功能完整，用户体验优秀
- ✅ 性能表现良好
- ✅ 代码质量高，易于维护

---

## 注意事项

1. **保持与后端API的兼容性**：确保前端调用与后端接口规范一致
2. **用户体验优先**：在功能实现的同时，注重用户操作的流畅性
3. **错误处理**：考虑网络异常、服务器错误等各种异常情况
4. **性能考虑**：LLM响应可能需要5-15秒，需要良好的加载状态提示

---

## 当前进度跟踪

- 📋 **计划制定**: ✅ 已完成
- 🔥 **第一阶段**: ❌ 待开始
- 📊 **第二阶段**: ❌ 待开始  
- ✨ **第三阶段**: ❌ 待开始
- 🚀 **第四阶段**: ❌ 待开始

**下一步行动**: 开始第一阶段的核心功能开发
